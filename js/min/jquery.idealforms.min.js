/*--------------------------------------------------------------------------

  jq-idealforms 2.0

  * Author: Cedric Ruiz
  * License: GPL
  * Demo: http://elclanrs.github.com/jq-idealforms/

--------------------------------------------------------------------------*/(function(a){"use strict";var b={getMaxWidth:function(b){var c=0;return b.each(function(){a(this).outerWidth()>c&&(c=a(this).outerWidth())}),c},getLessVar:function(b,c){var d=a('<p class="'+b+'"></p>').hide().appendTo("body").css(c);return a("."+b).remove(),/^\d+/.test(d)?parseInt(d,10):d}};a.fn.toCustomSelect=function(){return this.each(function(){var b=a(this),c=function(){var c=b.find("option"),d=a('<ul class="ideal-select"/>'),e=a('<li><span class="title">'+c.filter(":selected").text()+"</span></li>"),f=function(){var b=[];return c.each(function(){var c=a(this);b.push('<li class="item" ideal-value="'+c.val()+'">'+c.text()+"</li>")}),b}();return e.append('<ul class="sub">'+f.join("")+"</ul>"),d.append(e),{options:c,select:d,title:e.find(".title"),sub:e.find(".sub"),items:e.find(".sub li")}}(),d={init:function(){b.css({position:"absolute",left:"-9999px"}),c.select.insertAfter(b),c.sub.hide(),c.items.eq(c.options.filter(":selected").index()).addClass("selected")}(),noWindowScroll:function(a){(a.which===40||a.which===38||a.which===13)&&a.preventDefault()},focusHack:function(){setTimeout(function(){b.trigger("focus")},1)},focus:function(){c.select.addClass("focus"),a(document).on("keydown.noscroll",d.noWindowScroll)},blur:function(){c.select.removeClass("open focus"),a(document).off(".noscroll")},scrollIntoView:function(a){var b=c.items.filter(".selected"),d=b.outerHeight(),e=c.sub.outerHeight(),f=function(){var c=b.position().top+d;return a==="down"?c<=e:c>0}();f||(d=a==="down"?d:-d,c.sub.scrollTop(c.sub.scrollTop()+d))},scrollToItem:function(){var a=c.items.filter(".selected").index(),b=c.items.outerHeight(),d=c.items.length,e=b*d,f=b*(d-a);c.sub.scrollTop(e-f)},showMenu:function(){c.sub.fadeIn("fast"),c.select.addClass("open"),d.select(c.options.filter(":selected").index()),d.scrollToItem()},hideMenu:function(){c.sub.hide(),c.select.removeClass("open")},select:function(a){c.items.removeClass("selected"),c.items.eq(a).addClass("selected")},change:function(a){var e=c.items.eq(a).text();d.select(a),c.title.text(e),c.options.eq(a).prop("selected",!0),b.trigger("change")},keydown:function(b){var e=c.items.filter(".selected").index(),f={9:function(){c.select.is(".menu")&&(d.blur(),d.hideMenu())},13:function(){c.select.is(".menu")&&(c.select.is(".open")?d.hideMenu():d.showMenu()),d.change(e)},27:function(){c.select.is(".menu")&&d.hideMenu()},40:function(){e<c.options.length-1&&(c.select.is(".open")?d.select(e+1):d.change(e+1)),d.scrollIntoView("down")},38:function(){e>0&&(c.select.is(".open")?d.select(e-1):d.change(e-1)),d.scrollIntoView("up")},"default":function(){var e=String.fromCharCode(b),f=c.items.filter(".selected").parent().index(),g=c.items.filter(function(){var b=new RegExp("^"+e,"i");return b.test(a(this).text())}).first().index();d.change(~g?g:f),d.scrollToItem(),d.focusHack()}};f[b]?f[b]():f["default"]()}},e={focus:d.focus,"blur.menu":function(){d.blur(),d.hideMenu()},"blur.list":function(){d.blur()},keydown:function(a){d.keydown(a.which)},"clickItem.menu":function(){d.change(a(this).index()),d.hideMenu()},"clickItem.list":function(){d.change(a(this).index())},"clickTitle.menu":function(){d.focus(),d.showMenu(),b.trigger("focus")},"hideOutside.menu":function(){b.off("blur.menu"),a(document).on("mousedown.ideal",function(f){a(f.target).closest(c.select).length?d.focusHack():(a(document).off("mousedown.ideal"),b.on("blur.menu",e["blur.menu"]))})},"mousedown.list":function(){d.focusHack()}},f=function(){c.select.removeClass("menu list"),b.off(".menu .list"),c.items.off(".menu .list"),c.select.off(".menu .list"),c.title.off(".menu .list")};c.select.on("menu",function(){f(),c.select.addClass("menu"),d.hideMenu(),b.on({"blur.menu":e["blur.menu"],"focus.menu":e.focus,"keydown.menu":e.keydown}),c.select.on("mousedown.menu",e["hideOutside.menu"]),c.items.on("click.menu",e["clickItem.menu"]),c.title.on("click.menu",e["clickTitle.menu"])}),c.select.on("list",function(){f(),c.select.addClass("list"),d.showMenu(),b.on({"blur.list":e["blur.list"],"focus.list":e.focus,"keydown.list":e.keydown}),c.select.on("mousedown.list",e["mousedown.list"]),c.items.on("mousedown.list",e["clickItem.list"])}),c.select.on("menu")})},a.fn.toCustomRadioCheck=function(){return this.each(function(){var b=a(this),c=a("<span/>");b.is(":checkbox")?c.addClass("ideal-check"):c.addClass("ideal-radio"),b.is(":checked")&&c.addClass("checked"),c.insertAfter(b),b.css({position:"absolute",left:"-9999px"}).on({change:function(){var b=a(this);b.trigger("focus"),b.is(":radio")?(b.parent().siblings("label").children(".ideal-radio").removeClass("checked"),b.next(".ideal-radio").addClass("checked")):b.is(":checked")?c.addClass("checked"):c.removeClass("checked")},focus:function(){c.parent().addClass("focus")},blur:function(){c.parent().removeClass("focus")},click:function(){a(this).trigger("focus")}})})};var c={number:{regex:/\d+/,error:"Must be a number."},digits:{regex:/^\d+$/,error:"Must be only digits."},name:{regex:/^[A-Za-z]{3,}$/,error:"Must be at least 3 characters long, and must only contain letters."},username:{regex:/^[a-z](?=[\w.]{3,31}$)\w*\.?\w*$/i,error:"Must be at between 4 and 32 characters long and start with a letter. You may use letters, numbers, underscores, and one dot (.)"},pass:{regex:/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/,error:"Must be at least 6 characters long, and contain at least one number, one uppercase and one lowercase letter."},strongpass:{regex:/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,error:"Must be at least 8 characters long and contain at least one uppercase and one lowercase letter and one number or special character."},email:{regex:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,error:"Must be a valid e-mail address. <em>(e.g. user@gmail.com)</em>"},phone:{regex:/^[2-9]\d{2}-\d{3}-\d{4}$/,error:"Must be a valid US phone number. <em>(e.g. 555-123-4567)</em>"},zip:{regex:/^\d{5}$|^\d{5}-\d{4}$/,error:"Must be a valid US zip code. <em>(e.g. 33245 or 33245-0003)</em>"},url:{regex:/^(?:(ftp|http|https):\/\/)?(?:[\w\-]+\.)+[a-z]{3,6}$/i,error:"Must be a valid URL. <em>(e.g. www.google.com)</em>"},min:{regex:function(a,b){var c=a.userOptions.data.min;return a.input.is(":checkbox, :radio")?(this.error="Check at least <strong>"+c+"</strong>",a.input.filter(":checked").length>=c):(this.error="Must be at least <strong>"+c+"</strong> characters long.",b.length>c-1)}},max:{regex:function(a,b){var c=a.userOptions.data.max;return this.error="<strong>"+c+"</strong> characters max.",b.length<=c}},date:{regex:function(a,b){var c=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/.exec(b),d=function(a,b,c){return a>0&&a<13&&c>0&&c<32768&&b>0&&b<=(new Date(c,a,0)).getDate()};return c&&d(c[1],c[2],c[3])},error:"Must be a valid date. <em>(e.g. mm/dd/yyyy)</em>"},exclude:{regex:function(b,c){return this.error='"'+c+'" is not available.',!~a.inArray(c,b.userOptions.data.exclude)}}};a.fn.idealforms=function(d){var e=a.extend({inputs:{},filters:{},onSuccess:function(a){alert("Thank you...")},onFail:function(){alert("The form does not validate! Check again...")},responsiveAt:"auto",customInputs:!0},d),f=this,g={inputs:f.find("input, select, textarea, :button"),labels:f.find("label:first-child"),text:f.find("input:text, input:password, textarea"),select:f.find("select"),radiocheck:f.find("input:radio, input:checkbox"),buttons:f.find(":button")},h={fieldWidth:b.getLessVar("ideal-field-width","width")},i={init:function(){f.css("visibility","visible").addClass("ideal-form"),f.children("div").addClass("ideal-wrap"),f.attr("novalidate","novalidate"),g.inputs.attr("autocomplete","off"),g.labels.addClass("ideal-label").width(b.getMaxWidth(g.labels)),function(){var c=a('<span class="error" />'),d=a('<i class="icon valid-icon" />'),e=a("<i/>",{"class":"icon invalid-icon",click:function(){var b=a(this);b.siblings("label").length?b.siblings("label:first").find("input").focus():b.siblings("input, select, textarea").focus()}});g.text.add(g.select).each(function(){var b=a(this);b.wrapAll('<span class="ideal-field"/>')}),g.radiocheck.parents(".ideal-wrap").each(function(){a(this).find("label:not(.ideal-label)").wrapAll('<span class="ideal-field ideal-radiocheck"/>')}),f.find(".ideal-field").append(d.add(e)).after(c)}(),e.customInputs&&(g.buttons.addClass("ideal-button"),g.select.addClass("custom").toCustomSelect(),g.radiocheck.addClass("custom").toCustomRadioCheck()),"placeholder"in a("<input/>")[0]||g.text.each(function(){a(this).val(a(this).attr("placeholder"))}).on({focus:function(){this.value===a(this).attr("placeholder")&&a(this).val("")},blur:function(){a(this).val()||a(this).val(a(this).attr("placeholder"))}})}(),validate:function(a,b){var d=!0,e="",f=a.input,g=a.userOptions,h=g.filters;if(h){!b&&/required/.test(h)&&(g.errors&&g.errors.required?e=g.errors.required:e="This field is required.",d=!1);if(b){h=h.split(/\s/);for(var i=0,j=h.length;i<j;i++){var k=h[i],l=typeof c[k]=="undefined"?"":c[k],m=typeof l.regex=="function",n=l.regex instanceof RegExp;if(l)if(m&&!l.regex(a,b)||n&&!l.regex.test(b)){d=!1,e=g.errors&&g.errors[k]||l.error;break}}}}return{isValid:d,error:e}},analyze:function(a,b){var c=g.inputs.filter('[name="'+a.attr("name")+'"]'),d=e.inputs[a.attr("name")]||"",f=function(){var b=a.val();if(b===a.attr("placeholder"))return;return a.is(":checkbox, :radio")?d&&" ":b}(),h=i.validate({input:c,userOptions:d},f),j=a.parents(".ideal-field"),k=j.next(".error"),l=function(){return c.is(":checkbox, :radio")?a.parent().siblings(".invalid-icon"):a.siblings(".invalid-icon")}(),m=function(){return c.is(":checkbox, :radio")?a.parent().siblings(".valid-icon"):a.siblings(".valid-icon")}();j.removeClass("valid invalid"),k.add(l).add(m).hide(),f&&h.isValid&&(k.add(l).hide(),j.addClass("valid"),m.show()),h.isValid||(l.show(),j.addClass("invalid"),b!=="blur"&&k.html(h.error).show())},responsive:function(){var b=h.fieldWidth+g.labels.outerWidth();e.responsiveAt==="auto"?f.width()<b?f.addClass("stack"):f.removeClass("stack"):a(window).width()<e.responsiveAt?f.addClass("stack"):f.removeClass("stack");var c=g.labels.filter(function(){return a(this).html()==="&nbsp;"});f.is(".stack")?c.hide():c.show();var d=g.select.next(".ideal-select");f.is(".stack")?d.trigger("list"):d.trigger("menu")}};return g.inputs.on("keyup change focus blur",function(b){i.analyze(a(this),b.type)}).blur(),f.submit(function(a){var b=f.find(".ideal-field.invalid");b.length?(a.preventDefault(),e.onFail(),b.first().find("input").focus()):e.onSuccess()}),e.responsiveAt&&(a(window).resize(function(){i.responsive()}),i.responsive()),a.extend(!0,c,e.filters),this}})(jQuery);