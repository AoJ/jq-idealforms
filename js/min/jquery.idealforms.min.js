/*--------------------------------------------------------------------------

  jq-idealforms 2.0

  * Author: Cedric Ruiz
  * License: GPL
  * Demo: http://elclanrs.github.com/jq-idealforms/

--------------------------------------------------------------------------*/(function(e){"use strict";var t={getMaxWidth:function(t){var n=0;return t.each(function(){e(this).outerWidth()>n&&(n=e(this).outerWidth())}),n},getLessVar:function(t,n){var r=e('<p class="'+t+'"></p>').hide().appendTo("body").css(n);return e("."+t).remove(),/^\d+/.test(r)?parseInt(r,10):r},getKeys:function(e){var t=[];for(var n in e)t.push(n);return t},isFunction:function(e){return typeof e=="function"},isRegex:function(e){return e instanceof RegExp}};e.fn.toCustomSelect=function(){return this.each(function(){var t=e(this);Select=function(){var n=t.find("option"),r=e('<ul class="ideal-select '+t.attr("name")+'"/>'),i=e('<li><span class="title">'+n.filter(":selected").text()+"</span></li>"),s=function(){var t=[];return n.each(function(){var n=e(this);t.push('<li class="item" ideal-value="'+n.val()+'">'+n.text()+"</li>")}),t}();return i.append('<ul class="sub">'+s.join("")+"</ul>"),r.append(i),{options:n,select:r,title:i.find(".title"),sub:i.find(".sub"),items:i.find(".sub li")}}();var n={init:function(){t.css({position:"absolute",left:"-9999px"}),Select.select.insertAfter(t),Select.sub.hide(),Select.items.eq(Select.options.filter(":selected").index()).addClass("selected")}(),noWindowScroll:function(e){(e.which===40||e.which===38||e.which===13)&&e.preventDefault()},focusHack:function(){setTimeout(function(){t.trigger("focus")},1)},focus:function(){Select.select.addClass("focus"),e(document).on("keydown.noscroll",n.noWindowScroll)},blur:function(){Select.select.removeClass("open focus"),e(document).off(".noscroll")},scrollIntoView:function(e){var t=Select.items.filter(".selected"),n=t.outerHeight(),r=Select.sub.outerHeight(),i=function(){var i=t.position().top+n;return e==="down"?i<=r:i>0}();i||(n=e==="down"?n:-n,Select.sub.scrollTop(Select.sub.scrollTop()+n))},scrollToItem:function(){var e=Select.items.filter(".selected").index(),t=Select.items.outerHeight(),n=Select.items.length,r=t*n,i=t*(n-e);Select.sub.scrollTop(r-i)},showMenu:function(){Select.sub.fadeIn("fast"),Select.select.addClass("open"),n.select(Select.options.filter(":selected").index()),n.scrollToItem()},hideMenu:function(){Select.sub.hide(),Select.select.removeClass("open")},select:function(e){Select.items.removeClass("selected"),Select.items.eq(e).addClass("selected")},change:function(e){var r=Select.items.eq(e).text();n.select(e),Select.title.text(r),Select.options.eq(e).prop("selected",!0),t.trigger("change")},keydown:function(t){var r=Select.items.filter(".selected").index(),i={9:function(){Select.select.is(".menu")&&(n.blur(),n.hideMenu())},13:function(){Select.select.is(".menu")&&(Select.select.is(".open")?n.hideMenu():n.showMenu()),n.change(r)},27:function(){Select.select.is(".menu")&&n.hideMenu()},40:function(){r<Select.options.length-1&&(Select.select.is(".open")?n.select(r+1):n.change(r+1)),n.scrollIntoView("down")},38:function(){r>0&&(Select.select.is(".open")?n.select(r-1):n.change(r-1)),n.scrollIntoView("up")},"default":function(){var r=String.fromCharCode(t),i=Select.items.filter(".selected").parent().index(),s=Select.items.filter(function(){var t=new RegExp("^"+r,"i");return t.test(e(this).text())}).first().index();n.change(~s?s:i),n.scrollToItem(),n.focusHack()}};i[t]?i[t]():i["default"]()}},r={focus:n.focus,"blur.menu":function(){n.blur(),n.hideMenu()},"blur.list":function(){n.blur()},keydown:function(e){n.keydown(e.which)},"clickItem.menu":function(){n.change(e(this).index()),n.hideMenu()},"clickItem.list":function(){n.change(e(this).index())},"clickTitle.menu":function(){n.focus(),n.showMenu(),t.trigger("focus")},"hideOutside.menu":function(){t.off("blur.menu"),e(document).on("mousedown.ideal",function(i){e(i.target).closest(Select.select).length?n.focusHack():(e(document).off("mousedown.ideal"),t.on("blur.menu",r["blur.menu"]))})},"mousedown.list":function(){n.focusHack()}},i=function(){Select.select.removeClass("menu list"),t.off(".menu .list"),Select.items.off(".menu .list"),Select.select.off(".menu .list"),Select.title.off(".menu .list")};Select.select.on("menu",function(){i(),Select.select.addClass("menu"),n.hideMenu(),t.on({"blur.menu":r["blur.menu"],"focus.menu":r.focus,"keydown.menu":r.keydown}),Select.select.on("mousedown.menu",r["hideOutside.menu"]),Select.items.on("click.menu",r["clickItem.menu"]),Select.title.on("click.menu",r["clickTitle.menu"])}),Select.select.on("list",function(){i(),Select.select.addClass("list"),n.showMenu(),t.on({"blur.list":r["blur.list"],"focus.list":r.focus,"keydown.list":r.keydown}),Select.select.on("mousedown.list",r["mousedown.list"]),Select.items.on("mousedown.list",r["clickItem.list"])}),Select.select.on("reset",function(){n.change(0)}),Select.select.trigger("menu")})},e.fn.toCustomRadioCheck=function(){return this.each(function(){var t=e(this),n=e("<span/>");t.is(":checkbox")?n.addClass("ideal-check"):n.addClass("ideal-radio"),t.is(":checked")&&n.addClass("checked"),n.insertAfter(t),e(this).parent("label").attr("onclick",""),t.css({position:"absolute",left:"-9999px"}).on({change:function(){var t=e(this);t.trigger("focus"),t.is(":radio")?(t.parent().siblings("label").children(".ideal-radio").removeClass("checked"),t.is(":checked")&&t.next(".ideal-radio").addClass("checked")):t.is(":checked")?n.addClass("checked"):n.removeClass("checked")},focus:function(){n.parent().addClass("focus")},blur:function(){n.parent().removeClass("focus")},click:function(){e(this).trigger("focus")}})})};var n={number:{regex:/\d+/,error:"Must be a number."},digits:{regex:/^\d+$/,error:"Must be only digits."},name:{regex:/^[A-Za-z]{3,}$/,error:"Must be at least 3 characters long, and must only contain letters."},username:{regex:/^[a-z](?=[\w.]{3,31}$)\w*\.?\w*$/i,error:"Must be at between 4 and 32 characters long and start with a letter. You may use letters, numbers, underscores, and one dot (.)"},pass:{regex:/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/,error:"Must be at least 6 characters long, and contain at least one number, one uppercase and one lowercase letter."},strongpass:{regex:/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,error:"Must be at least 8 characters long and contain at least one uppercase and one lowercase letter and one number or special character."},email:{regex:/^(?:[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-zA-Z0-9-]*[a-zA-Z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/,error:"Must be a valid e-mail address. <em>(e.g. user@gmail.com)</em>"},phone:{regex:/^[2-9]\d{2}-\d{3}-\d{4}$/,error:"Must be a valid US phone number. <em>(e.g. 555-123-4567)</em>"},zip:{regex:/^\d{5}$|^\d{5}-\d{4}$/,error:"Must be a valid US zip code. <em>(e.g. 33245 or 33245-0003)</em>"},url:{regex:/^(?:(ftp|http|https):\/\/)?(?:[\w\-]+\.)+[a-z]{3,6}$/i,error:"Must be a valid URL. <em>(e.g. www.google.com)</em>"},min:{regex:function(e,t){var n=e.input,r=e.userOptions.data.min;return n.is(":checkbox, :radio")?(this.error="Check at least <strong>"+r+"</strong>",n.filter(":checked").length>=r):(this.error="Must be at least <strong>"+r+"</strong> characters long.",t.length>=r)}},max:{regex:function(e,t){var n=e.input,r=e.userOptions.data.max;return n.is(":checkbox, :radio")?(this.error="Check <strong>"+r+"</strong> maximum.",n.filter(":checked").length<=r):(this.error="<strong>"+r+"</strong> characters max.",t.length<=r)}},date:{regex:function(e,t){var n=e.userOptions.data?e.userOptions.data.date:"mm/dd/yyyy",r=/[^mdy]/.exec(n)[0],i=n.split(r),s=t.split(r),o=function(e,t){var n,r,i;for(var s=0,o=t.length;s<o;s++)/m/.test(t[s])&&(n=e[s]),/d/.test(t[s])&&(r=e[s]),/y/.test(t[s])&&(i=e[s]);return console.log(i),n>0&&n<13&&i&&i.length===4&&r>0&&r<=(new Date(i,n,0)).getDate()};return this.error="Must be a valid date. <em>(e.g. "+n+")</em>",o(s,i)}},exclude:{regex:function(t,n){return this.error='"'+n+'" is not available.',!~e.inArray(n,t.userOptions.data.exclude)}},equalto:{regex:function(t,n){var r=e(t.userOptions.data.equalto),i=t.input,s=r.attr("name")||r.attr("id");return this.error='Must be the same value as <strong>"'+s+'"</strong>',r.parents(".ideal-field").filter(function(){return e(this).data("isValid")===!1}).length?!1:i.val()===r.val()}}},r={noerror:function(e){e.parent().siblings(".error").hide()},noicons:function(e){e.siblings(".valid-icon, .invalid-icon").hide()},novalidicon:function(e){e.siblings(".valid-icon").hide()},noinvalidicon:function(e){e.siblings(".invalid-icon").hide()},noclass:function(e){e.parents(".ideal-field").removeClass("valid invalid")},novalidclass:function(e){e.parents(".ideal-field").removeClass("valid")},noinvalidclass:function(e){e.parents(".ideal-field").removeClass("invalid")}};e.fn.idealforms=function(i){var s=e.extend({inputs:{},customFilters:{},customFlags:{},globalFlags:"",onSuccess:function(e){alert("Thank you...")},onFail:function(){alert("The form does not validate! Check again...")},responsiveAt:"auto",customInputs:!0},i),o=this,u={inputs:o.find("input, select, textarea, :button"),labels:o.find("label:first-child"),text:o.find("input:not(:checkbox, :radio), textarea"),select:o.find("select"),radiocheck:o.find("input:radio, input:checkbox"),buttons:o.find(":button")},a=e('[name="'+t.getKeys(s.inputs).join('"], [name="')+'"],'+"."+t.getKeys(n).join(", .")),f={fieldWidth:t.getLessVar("ideal-field-width","width")},l={init:function(){var n=e('<span class="error" />'),r=e('<i class="icon valid-icon" />'),i=e("<i/>",{"class":"icon invalid-icon",click:function(){var t=e(this);t.siblings("label").length?t.siblings("label:first").find("input").focus():t.siblings("input, select, textarea").focus()}});o.css("visibility","visible").addClass("ideal-form"),o.children("div").addClass("ideal-wrap"),o.attr("novalidate","novalidate"),u.inputs.attr("autocomplete","off"),u.labels.addClass("ideal-label").width(t.getMaxWidth(u.labels)),u.text.add(u.select).each(function(){var t=e(this);t.wrapAll('<span class="ideal-field"/>')}),u.radiocheck.parents(".ideal-wrap").each(function(){e(this).find("label:not(.ideal-label)").wrapAll('<span class="ideal-field ideal-radiocheck"/>')}),a.parents(".ideal-field").append(r.add(i)).after(n.hide()),s.customInputs&&(u.buttons.addClass("ideal-button"),u.select.toCustomSelect(),u.radiocheck.toCustomRadioCheck()),"placeholder"in e("<input/>")[0]||u.text.each(function(){e(this).val(e(this).attr("placeholder"))}).on({focus:function(){this.value===e(this).attr("placeholder")&&e(this).val("")},blur:function(){e(this).val()||e(this).val(e(this).attr("placeholder"))}})}(),validate:function(e,r){var i=!0,s="",o=e.input,u=e.userOptions,a=u.filters;if(a){!r&&/required/.test(a)&&(s=u.errors&&u.errors.required?u.errors.required:"This field is required.",i=!1);if(r){a=a.split(/\s/);for(var f=0,l=a.length;f<l;f++){var c=a[f],h=n[c]||"";if(h&&(t.isFunction(h.regex)&&!h.regex(e,r)||t.isRegex(h.regex)&&!h.regex.test(r))){i=!1,s=u.errors&&u.errors[c]||h.error;break}}}}return{isValid:i,error:s}},analyze:function(e,t){var n=e.is(":checkbox, :radio"),i=function(){return n?a.filter('[name="'+e.attr("name")+'"]'):a.filter(e)}(),o=s.inputs[e.attr("name")]||{filters:e.attr("class")},u=function(){var t=e.val();if(t===e.attr("placeholder"))return;return n?o&&" ":t}(),f=e.parents(".ideal-field"),c=f.next(".error"),h=function(){return n?e.parent().siblings(".invalid-icon"):e.siblings(".invalid-icon")}(),p=function(){return n?e.parent().siblings(".valid-icon"):e.siblings(".valid-icon")}(),d=l.validate({input:i,userOptions:o},u),v=function(){var e=o.flags?o.flags:"";return s.globalFlags&&(e+=s.globalFlags),e.split(/\s/)}(),m=function(){for(var e=0,n=v.length,s;e<n;e++){s=v[e];if(!r[s])break;r[s](i,t)}};f.removeClass("valid invalid").data("isValid",!0),c.add(h).add(p).hide(),u&&d.isValid&&(c.add(h).hide(),f.addClass("valid").data("isValid",!0),p.show()),d.isValid||(h.show(),f.addClass("invalid").data("isValid",!1),t!=="blur"&&c.html(d.error).show()),m()},responsive:function(){var t=f.fieldWidth+u.labels.outerWidth(),n=u.labels.filter(function(){return e(this).html()==="&nbsp;"}),r=u.select.next(".ideal-select");s.responsiveAt==="auto"?o.width()<t?o.addClass("stack"):o.removeClass("stack"):e(window).width()<s.responsiveAt?o.addClass("stack"):o.removeClass("stack"),o.is(".stack")?(n.hide(),r.trigger("list")):(n.show(),r.trigger("menu"))}},c={getInvalid:function(){return o.find(".ideal-field").filter(function(){return e(this).data("isValid")===!1})},isValid:function(){return!o.getInvalid().length},isValidField:function(t){var n=e('[name="'+t+'"]').length?e('[name="'+t+'"]'):e("#"+t);return n.parents(".ideal-field").data("isValid")===!1},focusFirst:function(){return o.find("input:first").focus(),o},focusFirstInvalid:function(){return o.getInvalid().first().find("input:first").focus(),o},fresh:function(){return a.blur().parents(".ideal-field").removeClass("valid invalid"),o},reset:function(){return u.text.val(""),u.radiocheck.removeAttr("checked"),u.select.find("option").first().prop("selected",!0),o.find(".ideal-select").trigger("reset"),u.inputs.change().blur(),o.focusFirst(),o}};for(var h in c)o[h]=c[h];return a.on("keyup change focus blur",function(t){l.analyze(e(this),t.type)}),o.fresh(),o.submit(function(e){o.isValid()?s.onSuccess(e):(e.preventDefault(),s.onFail(),o.focusFirstInvalid())}),s.responsiveAt&&(e(window).resize(l.responsive),l.responsive()),e.extend(!0,n,s.customFilters),e.extend(!0,r,s.customFlags),this}})(jQuery);