/**
 * A custom <select> menu jQuery plugin
 * @example `$('select').toCustomSelect()`
 */$.fn.toCustomSelect=function(){return this.each(function(){var e=$(this),t=function(){var t=e.find("option"),n=$('<ul class="ideal-select '+e.attr("name")+'"/>'),r=$('<li><span class="title">'+t.filter(":selected").text()+"</span></li>"),i=function(){var e=[];return t.each(function(){var t=$(this);e.push('<li class="item" ideal-value="'+t.val()+'">'+t.text()+"</li>")}),e}();return r.append('<ul class="sub">'+i.join("")+"</ul>"),n.append(r),{options:t,select:n,title:r.find(".title"),sub:r.find(".sub"),items:r.find(".sub li")}}(),n={init:function(){e.css({position:"absolute",left:"-9999px"}),t.select.insertAfter(e),t.sub.hide(),t.items.eq(t.options.filter(":selected").index()).addClass("selected")}(),noWindowScroll:function(e){(e.which===40||e.which===38||e.which===13)&&e.preventDefault()},focusHack:function(){setTimeout(function(){e.trigger("focus")},1)},focus:function(){t.select.addClass("focus"),$(document).on("keydown.noscroll",n.noWindowScroll)},blur:function(){t.select.removeClass("open focus"),$(document).off(".noscroll")},scrollIntoView:function(e){var n=t.items.filter(".selected"),r=n.outerHeight(),i=t.sub.outerHeight(),s=function(){var t=n.position().top+r;return e==="down"?t<=i:t>0}();s||(r=e==="down"?r:-r,t.sub.scrollTop(t.sub.scrollTop()+r))},scrollToItem:function(){var e=t.items.filter(".selected").index(),n=t.items.outerHeight(),r=t.items.length,i=n*r,s=n*(r-e);t.sub.scrollTop(i-s)},showMenu:function(){t.sub.fadeIn("fast"),t.select.addClass("open"),n.select(t.options.filter(":selected").index()),n.scrollToItem()},hideMenu:function(){t.sub.hide(),t.select.removeClass("open")},select:function(e){t.items.removeClass("selected"),t.items.eq(e).addClass("selected")},change:function(r){var i=t.items.eq(r).text();n.select(r),t.title.text(i),t.options.eq(r).prop("selected",!0),e.trigger("change")},keydown:function(e){var r=t.items.filter(".selected").index(),i={9:function(){t.select.is(".menu")&&(n.blur(),n.hideMenu())},13:function(){t.select.is(".menu")&&(t.select.is(".open")?n.hideMenu():n.showMenu()),n.change(r)},27:function(){t.select.is(".menu")&&n.hideMenu()},40:function(){r<t.options.length-1&&(t.select.is(".open")?n.select(r+1):n.change(r+1)),n.scrollIntoView("down")},38:function(){r>0&&(t.select.is(".open")?n.select(r-1):n.change(r-1)),n.scrollIntoView("up")},"default":function(){var r=String.fromCharCode(e),i=t.items.filter(".selected").parent().index(),s=t.items.filter(function(){var e=new RegExp("^"+r,"i");return e.test($(this).text())}).first().index();n.change(~s?s:i),n.scrollToItem(),n.focusHack()}};i[e]?i[e]():i["default"]()}},r={focus:n.focus,"blur.menu":function(){n.blur(),n.hideMenu()},"blur.list":function(){n.blur()},keydown:function(e){n.keydown(e.which)},"clickItem.menu":function(){n.change($(this).index()),n.hideMenu()},"clickItem.list":function(){n.change($(this).index())},"clickTitle.menu":function(){n.focus(),n.showMenu(),e.trigger("focus")},"hideOutside.menu":function(){e.off("blur.menu"),$(document).on("mousedown.ideal",function(i){$(i.target).closest(t.select).length?n.focusHack():($(document).off("mousedown.ideal"),e.on("blur.menu",r["blur.menu"]))})},"mousedown.list":function(){n.focusHack()}},i=function(){t.select.removeClass("menu list"),e.off(".menu .list"),t.items.off(".menu .list"),t.select.off(".menu .list"),t.title.off(".menu .list")};t.select.on("menu",function(){i(),t.select.addClass("menu"),n.hideMenu(),e.on({"blur.menu":r["blur.menu"],"focus.menu":r.focus,"keydown.menu":r.keydown}),t.select.on("mousedown.menu",r["hideOutside.menu"]),t.items.on("click.menu",r["clickItem.menu"]),t.title.on("click.menu",r["clickTitle.menu"])}),t.select.on("list",function(){i(),t.select.addClass("list"),n.showMenu(),e.on({"blur.list":r["blur.list"],"focus.list":r.focus,"keydown.list":r.keydown}),t.select.on("mousedown.list",r["mousedown.list"]),t.items.on("mousedown.list",r["clickItem.list"])}),t.select.on("reset",function(){n.change(0)}),t.select.trigger("menu")})},$.fn.toCustomRadioCheck=function(){return this.each(function(){var e=$(this),t=$("<span/>");e.is(":checkbox")?t.addClass("ideal-check"):t.addClass("ideal-radio"),e.is(":checked")&&t.addClass("checked"),t.insertAfter(e),$(this).parent("label").attr("onclick",""),e.css({position:"absolute",left:"-9999px"}).on({change:function(){var e=$(this);e.trigger("focus"),e.is(":radio")?(e.parent().siblings("label").children(".ideal-radio").removeClass("checked"),e.is(":checked")&&e.next(".ideal-radio").addClass("checked")):e.is(":checked")?t.addClass("checked"):t.removeClass("checked")},focus:function(){t.parent().addClass("focus")},blur:function(){t.parent().removeClass("focus")},click:function(){$(this).trigger("focus")}})})},function(e){"use strict";var t={getMaxWidth:function(t){var n=0;return t.each(function(){e(this).outerWidth()>n&&(n=e(this).outerWidth())}),n},getLessVar:function(t,n){var r=e('<p class="'+t+'"></p>').hide().appendTo("body").css(n);return e("."+t).remove(),/^\d+/.test(r)?parseInt(r,10):r},getKeys:function(e){var t=[];for(var n in e)t.push(n);return t},isFunction:function(e){return typeof e=="function"},isRegex:function(e){return e instanceof RegExp}},n={number:{regex:/\d+/,error:"Must be a number."},digits:{regex:/^\d+$/,error:"Must be only digits."},name:{regex:/^[A-Za-z]{3,}$/,error:"Must be at least 3 characters long, and must only contain letters."},username:{regex:/^[a-z](?=[\w.]{3,31}$)\w*\.?\w*$/i,error:"Must be at between 4 and 32 characters long and start with a letter. You may use letters, numbers, underscores, and one dot (.)"},pass:{regex:/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/,error:"Must be at least 6 characters long, and contain at least one number, one uppercase and one lowercase letter."},strongpass:{regex:/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,error:"Must be at least 8 characters long and contain at least one uppercase and one lowercase letter and one number or special character."},email:{regex:/^(?:[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-zA-Z0-9-]*[a-zA-Z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/,error:"Must be a valid e-mail address. <em>(e.g. user@gmail.com)</em>"},phone:{regex:/^[2-9]\d{2}-\d{3}-\d{4}$/,error:"Must be a valid US phone number. <em>(e.g. 555-123-4567)</em>"},zip:{regex:/^\d{5}$|^\d{5}-\d{4}$/,error:"Must be a valid US zip code. <em>(e.g. 33245 or 33245-0003)</em>"},url:{regex:/^(?:(ftp|http|https):\/\/)?(?:[\w\-]+\.)+[a-z]{3,6}$/i,error:"Must be a valid URL. <em>(e.g. www.google.com)</em>"},min:{regex:function(e,t){var n=e.userOptions.data.min;return e.input.is(":checkbox, :radio")?(this.error="Check at least <strong>"+n+"</strong>",e.input.filter(":checked").length>=n):(this.error="Must be at least <strong>"+n+"</strong> characters long.",t.length>n-1)}},max:{regex:function(e,t){var n=e.userOptions.data.max;return this.error="<strong>"+n+"</strong> characters max.",t.length<=n}},date:{regex:function(e,t){var n=e.userOptions.data?e.userOptions.data.date:{format:"dd/mm/yyyy"},r=/[^mdy]/.exec(n.format)[0],i=n.format.split(r),s=t.split(r),o=function(e,t){var n,r,i;for(var s=0,o=t.length;s<o;s++)/m/.test(t[s])&&(n=e[s]),/d/.test(t[s])&&(r=e[s]),/y/.test(t[s])&&(i=e[s]);return n>0&&n<13&&i>0&&i.length===4&&i<32768&&r>0&&r<=(new Date(i,n,0)).getDate()};return o(s,i)},error:"Must be a valid date. <em>(e.g. mm/dd/yyyy)</em>"},exclude:{regex:function(t,n){return this.error='"'+n+'" is not available.',!~e.inArray(n,t.userOptions.data.exclude)}},equalto:{regex:function(t,n){var r=e(t.userOptions.data.equalto),i=t.input,s=r.attr("name")||r.attr("id");return this.error='Must be the same value as <strong>"'+s+'"</strong>',r.parents(".ideal-field").filter(function(){return e(this).data("isValid")===!1}).length?!1:i.val()===r.val()}}},r={noerror:function(e){e.parent().siblings(".error").hide()},noicons:function(e){e.siblings(".valid-icon, .invalid-icon").hide()},novalidicon:function(e){e.siblings(".valid-icon").hide()},noinvalidicon:function(e){e.siblings(".invalid-icon").hide()},noclass:function(e){e.parents(".ideal-field").removeClass("valid invalid")},novalidclass:function(e){e.parents(".ideal-field").removeClass("valid")},noinvalidclass:function(e){e.parents(".ideal-field").removeClass("invalid")}};e.fn.idealforms=function(i){var s=e.extend({inputs:{},customFilters:{},customFlags:{},globalFlags:"",onSuccess:function(e){alert("Thank you...")},onFail:function(){alert("The form does not validate! Check again...")},responsiveAt:"auto",customInputs:!0},i),o=this,u={inputs:o.find("input, select, textarea, :button"),labels:o.find("label:first-child"),text:o.find("input:not(:checkbox, :radio), textarea"),select:o.find("select"),radiocheck:o.find("input:radio, input:checkbox"),buttons:o.find(":button")},a=e('[name="'+t.getKeys(s.inputs).join('"], [name="')+'"],'+"."+t.getKeys(n).join(", .")),f={fieldWidth:t.getLessVar("ideal-field-width","width")},l={init:function(){var n=e('<span class="error" />'),r=e('<i class="icon valid-icon" />'),i=e("<i/>",{"class":"icon invalid-icon",click:function(){var t=e(this);t.siblings("label").length?t.siblings("label:first").find("input").focus():t.siblings("input, select, textarea").focus()}});o.css("visibility","visible").addClass("ideal-form"),o.children("div").addClass("ideal-wrap"),o.attr("novalidate","novalidate"),u.inputs.attr("autocomplete","off"),u.labels.addClass("ideal-label").width(t.getMaxWidth(u.labels)),u.text.add(u.select).each(function(){var t=e(this);t.wrapAll('<span class="ideal-field"/>')}),u.radiocheck.parents(".ideal-wrap").each(function(){e(this).find("label:not(.ideal-label)").wrapAll('<span class="ideal-field ideal-radiocheck"/>')}),a.parents(".ideal-field").append(r.add(i)).after(n.hide()),s.customInputs&&(u.buttons.addClass("ideal-button"),u.select.toCustomSelect(),u.radiocheck.toCustomRadioCheck()),"placeholder"in e("<input/>")[0]||u.text.each(function(){e(this).val(e(this).attr("placeholder"))}).on({focus:function(){this.value===e(this).attr("placeholder")&&e(this).val("")},blur:function(){e(this).val()||e(this).val(e(this).attr("placeholder"))}})}(),validate:function(e,r){var i=!0,s="",o=e.input,u=e.userOptions,a=u.filters;if(a){!r&&/required/.test(a)&&(s=u.errors&&u.errors.required?u.errors.required:"This field is required.",i=!1);if(r){a=a.split(/\s/);for(var f=0,l=a.length;f<l;f++){var c=a[f],h=n[c]||"";if(h&&(t.isFunction(h.regex)&&!h.regex(e,r)||t.isRegex(h.regex)&&!h.regex.test(r))){i=!1,s=u.errors&&u.errors[c]||h.error;break}}}}return{isValid:i,error:s}},analyze:function(e,t){var n=e.is(":checkbox, :radio"),i=function(){return n?a.filter('[name="'+e.attr("name")+'"]'):a.filter(e)}(),o=s.inputs[e.attr("name")]||{filters:e.attr("class")},u=function(){var t=e.val();if(t===e.attr("placeholder"))return;return n?o&&" ":t}(),f=e.parents(".ideal-field"),c=f.next(".error"),h=function(){return n?e.parent().siblings(".invalid-icon"):e.siblings(".invalid-icon")}(),p=function(){return n?e.parent().siblings(".valid-icon"):e.siblings(".valid-icon")}(),d=l.validate({input:i,userOptions:o},u),v=function(){var e=o.flags?o.flags:"";return s.globalFlags&&(e+=s.globalFlags),e.split(/\s/)}(),m=function(){for(var e=0,n=v.length,s;e<n;e++){s=v[e];if(!r[s])break;r[s](i,t)}};f.removeClass("valid invalid").data("isValid",!0),c.add(h).add(p).hide(),u&&d.isValid&&(c.add(h).hide(),f.addClass("valid").data("isValid",!0),p.show()),d.isValid||(h.show(),f.addClass("invalid").data("isValid",!1),t!=="blur"&&c.html(d.error).show()),m()},responsive:function(){var t=f.fieldWidth+u.labels.outerWidth(),n=u.labels.filter(function(){return e(this).html()==="&nbsp;"}),r=u.select.next(".ideal-select");s.responsiveAt==="auto"?o.width()<t?o.addClass("stack"):o.removeClass("stack"):e(window).width()<s.responsiveAt?o.addClass("stack"):o.removeClass("stack"),o.is(".stack")?(n.hide(),r.trigger("list")):(n.show(),r.trigger("menu"))}},c={isValid:function(){var t=o.find(".ideal-field").filter(function(){return e(this).data("isValid")===!1});return!t.length},isValidField:function(t){var n=e('[name="'+t+'"]').length?e('[name="'+t+'"]'):e("#"+t);return n.parents(".ideal-field").data("isValid")===!1},focusFirst:function(){return o.find("input:first").focus(),o},focusFirstInvalid:function(){return o.find(".ideal-field").filter(function(){return e(this).data("isValid")===!1}).first().find("input:first").focus(),o},fresh:function(){return a.blur().parents(".ideal-field").removeClass("valid invalid"),o},reset:function(){return u.text.val(""),u.radiocheck.removeAttr("checked"),u.select.find("option").first().prop("selected",!0),o.find(".ideal-select").trigger("reset"),u.inputs.change().blur(),o.focusFirst(),o}};for(var h in c)o[h]=c[h];return a.on("keyup change focus blur",function(t){l.analyze(e(this),t.type)}),o.fresh(),o.submit(function(e){o.isValid()?s.onSuccess(e):(e.preventDefault(),s.onFail(),o.focusFirstInvalid())}),s.responsiveAt&&(e(window).resize(l.responsive),l.responsive()),e.extend(!0,n,s.customFilters),e.extend(!0,r,s.customFlags),this}}(jQuery);